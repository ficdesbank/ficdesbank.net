<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ouverture de Compte - FICDES-BANK</title>
  <meta name="description" content="Formulaire d'ouverture de compte CPF - FICDES-BANK">
  <meta name="referrer" content="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
 <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
 <meta property="og:image" content="/assets/share-banner.png">
 <meta property="og:title" content="FICDES-BANK â€” Ouverture de Compte CPF">
 <meta property="og:description" content="CrÃ©ez votre compte CPF en toute sÃ©curitÃ©.">
  <style>
    :root{
      --primary:#007bff;
      --hover:#0056b3;
      --bg-gradient: linear-gradient(90deg,#74ebd5,#acb6e5);
      --card:#ffffff;
      --muted:#6c757d;
      --danger:#d9534f;
      --success:#1b7a3b;
      --radius:12px;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;}
    html,body{height:100%;}
    body{
      min-height:100vh;
      background:var(--bg-gradient);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:90px 16px 40px;
    }

    header.app-header{
      position:fixed;
      top:12px;
      left:12px;
      display:flex;
      align-items:center;
      gap:12px;
      z-index:1200;
      background:rgba(255,255,255,0.95);
      padding:8px 12px;
      border-radius:var(--radius);
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
      backdrop-filter: blur(6px);
    }
    .brand{width:46px;height:46px;border-radius:10px;background:linear-gradient(180deg,#0b61d8,#0a4fb8);display:flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:18px;}
    .brand-title{display:flex;flex-direction:column;line-height:1;}
    .brand-title .name{font-weight:800;color:#0b2540;font-size:14px;}
    .brand-title .sub{font-size:12px;color:var(--muted);}
    .lang-select{margin-left:8px;background:white;border:1px solid #e0e6ee;border-radius:8px;padding:6px 8px;font-size:13px;cursor:pointer;}

    .container{
      width:100%;max-width:720px;background:var(--card);
      padding:34px;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,0.12);
      animation:fadeIn .45s ease;
    }
    @keyframes fadeIn{ from{opacity:0;transform:translateY(-8px)} to{opacity:1;transform:none} }

    h2{font-size:22px;color:#111827;text-align:center;margin-bottom:6px;}
    h3{font-size:14px;color:var(--primary);text-align:center;margin-bottom:18px;}

    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    .form-group{margin-bottom:14px;}
    label{display:block;font-weight:600;margin-bottom:6px;color:#333;}
    input[type="text"], input[type="email"], input[type="password"], select, input[type="tel"]{
      width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e0e6ee;background:#fbfcfe;font-size:15px;
    }
    input:focus, select:focus{outline:none;border-color:var(--primary);box-shadow:0 10px 30px rgba(0,123,255,0.06);}

    .phone-row{display:flex;gap:8px;align-items:center;}
    .phone-row input:first-child{min-width:100px;text-align:center;background:#f3f6fb;border-radius:10px;border:1px solid #e0e6ee;padding:10px;}
    .checkbox{display:flex;gap:8px;align-items:center;font-size:14px;margin-top:6px;}
    .btn{width:100%;padding:13px;border-radius:10px;border:none;font-weight:800;background:var(--primary);color:#fff;cursor:pointer;font-size:16px;margin-top:8px;}
    .btn:disabled{opacity:.6;cursor:not-allowed;}
    .help{font-size:13px;color:var(--muted);margin-top:6px;}
    .inline-error{color:var(--danger);font-size:13px;margin-top:6px;display:none;}
    .message{display:none;margin-top:12px;padding:10px;border-radius:8px;font-weight:700;text-align:center;}
    .message.success{background:#e8f5e9;color:var(--success);}
    .message.error{background:#fff5f5;color:var(--danger);}
    .message.created{background:#fffaf0;color:#6b4a00;}
    .sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;}

    @media(max-width:720px){
      .container{padding:22px}
      .form-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
<noscript>
  <div style="background:#ffdddd;color:#900;padding:10px;border-radius:8px;text-align:center;">
    âš ï¸ Ce site nÃ©cessite JavaScript pour fonctionner correctement.
    Veuillez activer JavaScript dans votre navigateur.
  </div>
</noscript>
  <header class="app-header" role="banner" aria-label="Bandeau FICDES">
    <div class="brand" aria-hidden="true">FB</div>
    <div class="brand-title" aria-hidden="true">
      <span class="name">FICDES-BANK</span>
      <span class="sub">Service Client CPF</span>
    </div>

    <label for="langSelect" class="sr-only">Langue</label>
    <select id="langSelect" class="lang-select" aria-label="SÃ©lection de la langue">
      <option value="FR">FR</option>
      <option value="EN">EN</option>
      <option value="ES">ES</option>
      <option value="TR">TR</option>
      <option value="DE">DE</option>
      <option value="AR">AR</option>
      <option value="ZH">ZH</option>
      <option value="RU">RU</option>
    </select>
  </header>

  <main class="container" role="main" aria-labelledby="title">
    <h2 id="title">Bienvenue Ã  FICDES-BANK S.A</h2>
    <h3 id="subtitle">Formulaire dâ€™ouverture de compte CPF</h3>

    <form id="inscriptionForm" novalidate aria-describedby="form-help">
      <div id="form-help" class="sr-only">Formulaire d'ouverture de compte CPF. Tous les champs marquÃ©s * sont obligatoires.</div>

      <div class="form-grid" role="group" aria-label="Informations personnelles">
        <div class="form-group">
          <label for="genre" id="label_genre">CivilitÃ© *</label>
          <select id="genre" name="genre" required aria-required="true">
            <option value="">-- SÃ©lectionnez --</option>
            <option value="Monsieur">Monsieur</option>
            <option value="Madame">Madame</option>
            <option value="Institution">Institution</option>
          </select>
          <div class="inline-error" id="err_genre">Choisissez votre civilitÃ©.</div>
        </div>

        <div class="form-group">
          <label for="raison_sociale" id="label_rs">Raison sociale</label>
          <input id="raison_sociale" name="raison_sociale" type="text" autocomplete="organization" />
          <div class="inline-error" id="err_rs" style="display:none;">Raison sociale invalide.</div>
        </div>

        <div class="form-group">
          <label for="nom" id="label_nom">Nom *</label>
          <input id="nom" name="nom" type="text" required minlength="2" autocomplete="family-name" />
          <div class="inline-error" id="err_nom">Nom requis (2+ caractÃ¨res).</div>
        </div>

        <div class="form-group">
          <label for="prenom" id="label_prenom">PrÃ©nom *</label>
          <input id="prenom" name="prenom" type="text" required minlength="2" autocomplete="given-name" />
          <div class="inline-error" id="err_prenom">PrÃ©nom requis (2+ caractÃ¨res).</div>
        </div>

        <div class="form-group">
          <label for="email" id="label_email">Adresse e-mail *</label>
          <input id="email" name="email" type="email" required autocomplete="email" placeholder="ex: moi@domaine.com" />
          <div class="inline-error" id="err_email">Adresse e-mail invalide.</div>
        </div>

        <div class="form-group">
          <label for="mot_de_passe" id="label_pass">Mot de passe *</label>
          <input id="mot_de_passe" name="mot_de_passe" type="password" required minlength="8" autocomplete="new-password" placeholder="8 caractÃ¨res min." />
          <div id="help_pass" class="help">Au moins 8 caractÃ¨res. MÃ©langez lettres et chiffres pour plus de sÃ©curitÃ©.</div>
        </div>

        <div class="form-group">
          <label for="confirmer_mot_de_passe" id="label_confpass">Confirmer le mot de passe *</label>
          <input id="confirmer_mot_de_passe" name="confirmer_mot_de_passe" type="password" required autocomplete="new-password" />
          <div class="inline-error" id="err_password">Les mots de passe ne correspondent pas.</div>
        </div>

        <div class="form-group">
          <label for="pays" id="label_pays">Pays *</label>
          <select id="pays" name="pays" required aria-required="true" aria-describedby="label_pays"></select>
          <div class="inline-error" id="err_pays">Choisissez un pays.</div>
        </div>

        <div class="form-group">
          <label for="telephone" id="label_tel">NumÃ©ro de tÃ©lÃ©phone *</label>
          <div class="phone-row">
            <input id="indicatif" name="indicatif" type="text" readonly aria-readonly="true" aria-label="Indicatif" />
            <input id="telephone" name="telephone" type="tel" required placeholder="ex: 90123456" autocomplete="tel" />
          </div>
          <div class="inline-error" id="err_tel">NumÃ©ro invalide (6 Ã  15 chiffres).</div>
        </div>

        <div class="form-group">
          <label for="mode" id="label_mode">Mode de communication *</label>
          <select id="mode" name="mode" required>
            <option value="whatsapp">WhatsApp</option>
            <option value="sms">SMS</option>
            <option value="email">Email</option>
          </select>
          <div class="inline-error" id="err_mode" style="display:none;">Choisissez un mode de communication.</div>
        </div>

        <div class="form-group checkbox" style="grid-column:1/ -1;">
          <input id="confidentialite" name="confidentialite" type="checkbox" required />
          <label for="confidentialite" id="confidentialite_label">Jâ€™accepte la <a id="confidentialite_link" href="#" rel="noopener" target="_blank">politique de confidentialitÃ©</a></label>
          <div class="inline-error" id="err_conf" style="display:none;">Vous devez accepter la politique de confidentialitÃ©.</div>
        </div>

      </div>

      <!-- CSRF container (sera rempli par JS) -->
      <div id="csrfContainer" aria-hidden="true"></div>

      <button class="btn" id="submitBtn" type="submit">CrÃ©er mon compte</button>

      <div id="successMessage" class="message success" role="status" aria-live="polite" aria-hidden="true">âœ… Compte crÃ©Ã© avec succÃ¨s !</div>
      <div id="createdMessage" class="message created" role="status" aria-live="polite" aria-hidden="true">âœ… Compte crÃ©Ã© â€” vÃ©rifiez votre messagerie pour le code.</div>
      <div id="errorMessage" class="message error" role="alert" aria-live="assertive" aria-hidden="true">âŒ Erreur, veuillez rÃ©essayer.</div>
      <div id="networkMessage" class="message error" role="alert" aria-live="assertive" aria-hidden="true">ğŸŒ Impossible de contacter le serveur. VÃ©rifiez la connexion.</div>
    </form>
  </main>

  <script defer>
  // ---------------------------
  // Configuration
  // ---------------------------
  const API_URL = "https://ficdes-cpf.netlify.app/api/create-account";

  // --- LANGUE ACTIVE ---
  let currentLang = localStorage.getItem('lang') || 'FR';
  const langSelect = document.getElementById('langSelect');

  // --- TRADUCTIONS (8 langues) ---
  const T = {
    FR:{
      title:"Bienvenue Ã  FICDES-BANK S.A",
      subtitle:"Formulaire dâ€™ouverture de compte CPF",
      select_placeholder:"-- SÃ©lectionnez --",
      opt_mr:"Monsieur", opt_mrs:"Madame", opt_inst:"Institution",
      label_nom:"Nom *", placeholder_nom:"ex: Dupont",
      label_prenom:"PrÃ©nom *", placeholder_prenom:"ex: Jean",
      label_rs:"Raison sociale",
      label_email:"Adresse e-mail *", placeholder_email:"ex: moi@domaine.com",
      label_pass:"Mot de passe *", placeholder_pass:"8 caractÃ¨res min.",
      help_pass:"Au moins 8 caractÃ¨res. MÃ©langez lettres et chiffres pour plus de sÃ©curitÃ©.",
      label_confpass:"Confirmer le mot de passe *",
      label_pays:"Pays *", label_tel:"NumÃ©ro de tÃ©lÃ©phone *", placeholder_tel:"ex: 90123456",
      label_mode:"Mode de communication *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"Email",
      label_confidentialite:'Jâ€™accepte la <a href="#" rel="noopener" target="_blank">politique de confidentialitÃ©</a>',
      btn:"CrÃ©er mon compte", sending:"Envoi en cours...", fix_fields:"Corrigez les champs indiquÃ©s.",
      err_genre:"Choisissez votre civilitÃ©.", err_nom:"Nom requis (2+ caractÃ¨res).", err_prenom:"PrÃ©nom requis (2+ caractÃ¨res).",
      err_email:"Adresse e-mail invalide.", err_password:"Les mots de passe ne correspondent pas.", err_pays:"Choisissez un pays.",
      err_tel:"NumÃ©ro invalide (6 Ã  15 chiffres).", success:"âœ… Compte crÃ©Ã© avec succÃ¨s !", error:"âŒ Erreur, veuillez rÃ©essayer.",
      created_message:"Compte crÃ©Ã© â€” vÃ©rifiez votre messagerie pour le code.", network_error:"Impossible de contacter le serveur. VÃ©rifiez la connexion."
    },
    EN:{
      title:"Welcome to FICDES-BANK S.A",
      subtitle:"CPF Account Opening Form",
      select_placeholder:"-- Select --",
      opt_mr:"Mr", opt_mrs:"Mrs", opt_inst:"Institution",
      label_nom:"Last name *", placeholder_nom:"e.g. Smith",
      label_prenom:"First name *", placeholder_prenom:"e.g. John",
      label_rs:"Company name",
      label_email:"Email address *", placeholder_email:"e.g. me@example.com",
      label_pass:"Password *", placeholder_pass:"min. 8 characters",
      help_pass:"At least 8 characters. Mix letters and numbers.",
      label_confpass:"Confirm password *",
      label_pays:"Country *", label_tel:"Phone number *", placeholder_tel:"e.g. 90123456",
      label_mode:"Preferred contact method *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"Email",
      label_confidentialite:'I accept the <a href="#" rel="noopener" target="_blank">privacy policy</a>',
      btn:"Create my account", sending:"Sending...", fix_fields:"Please correct the highlighted fields.",
      err_genre:"Please select your title.", err_nom:"Last name required (2+ characters).", err_prenom:"First name required (2+ characters).",
      err_email:"Invalid email address.", err_password:"Passwords do not match.", err_pays:"Please select a country.",
      err_tel:"Invalid number (6â€“15 digits).", success:"âœ… Account successfully created!", error:"âŒ Error, please try again.",
      created_message:"Account created â€” check your email for the code.", network_error:"Unable to contact the server. Check your connection."
    },
    ES:{
      title:"Bienvenido a FICDES-BANK S.A",
      subtitle:"Formulario de apertura de cuenta CPF",
      select_placeholder:"-- Seleccione --",
      opt_mr:"SeÃ±or", opt_mrs:"SeÃ±ora", opt_inst:"InstituciÃ³n",
      label_nom:"Apellido *", placeholder_nom:"ej: GarcÃ­a",
      label_prenom:"Nombre *", placeholder_prenom:"ej: Juan",
      label_rs:"RazÃ³n social",
      label_email:"Correo electrÃ³nico *", placeholder_email:"ej: yo@ejemplo.com",
      label_pass:"ContraseÃ±a *", placeholder_pass:"8 caracteres min.",
      help_pass:"MÃ­nimo 8 caracteres. Combine letras y nÃºmeros.",
      label_confpass:"Confirmar contraseÃ±a *",
      label_pays:"PaÃ­s *", label_tel:"NÃºmero de telÃ©fono *", placeholder_tel:"ej: 90123456",
      label_mode:"Modo de comunicaciÃ³n *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"Correo electrÃ³nico",
      label_confidentialite:'Acepto la <a href="#" rel="noopener" target="_blank">polÃ­tica de privacidad</a>',
      btn:"Crear mi cuenta", sending:"Enviando...", fix_fields:"Corrija los campos indicados.",
      err_genre:"Seleccione su tratamiento.", err_nom:"Apellido requerido (2+ caracteres).", err_prenom:"Nombre requerido (2+ caracteres).",
      err_email:"Correo electrÃ³nico invÃ¡lido.", err_password:"Las contraseÃ±as no coinciden.", err_pays:"Seleccione un paÃ­s.",
      err_tel:"NÃºmero invÃ¡lido (6â€“15 dÃ­gitos).", success:"âœ… Â¡Cuenta creada con Ã©xito!", error:"âŒ Error, intÃ©ntelo de nuevo.",
      created_message:"Cuenta creada â€” revise su correo para el cÃ³digo.", network_error:"Imposible contactar el servidor. Verifique la conexiÃ³n."
    },
    TR:{
      title:"FICDES-BANK S.Aâ€™ya HoÅŸgeldiniz",
      subtitle:"CPF Hesap AÃ§ma Formu",
      select_placeholder:"-- SeÃ§iniz --",
      opt_mr:"Bay", opt_mrs:"Bayan", opt_inst:"Kurum",
      label_nom:"SoyadÄ± *", placeholder_nom:"Ã¶r: YÄ±lmaz",
      label_prenom:"AdÄ± *", placeholder_prenom:"Ã¶r: Ahmet",
      label_rs:"Åirket adÄ±",
      label_email:"E-posta adresi *", placeholder_email:"Ã¶r: ben@ornek.com",
      label_pass:"Parola *", placeholder_pass:"8 karakter min.",
      help_pass:"En az 8 karakter. Harf ve rakam karÄ±ÅŸtÄ±rÄ±n.",
      label_confpass:"ParolayÄ± doÄŸrulayÄ±n *",
      label_pays:"Ãœlke *", label_tel:"Telefon numarasÄ± *", placeholder_tel:"Ã¶r: 90123456",
      label_mode:"Ä°letiÅŸim yÃ¶ntemi *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"E-posta",
      label_confidentialite:'<a href="#" rel="noopener" target="_blank">Gizlilik politikasÄ±nÄ±</a> kabul ediyorum',
      btn:"Hesap oluÅŸtur", sending:"GÃ¶nderiliyor...", fix_fields:"LÃ¼tfen iÅŸaretli alanlarÄ± dÃ¼zeltin.",
      err_genre:"LÃ¼tfen Ã¼nvanÄ±nÄ±zÄ± seÃ§in.", err_nom:"SoyadÄ± gerekli (2+ karakter).", err_prenom:"Ad gerekli (2+ karakter).",
      err_email:"GeÃ§ersiz e-posta.", err_password:"Parolalar eÅŸleÅŸmiyor.", err_pays:"Bir Ã¼lke seÃ§in.",
      err_tel:"GeÃ§ersiz numara (6â€“15 hane).", success:"âœ… Hesap baÅŸarÄ±yla oluÅŸturuldu!", error:"âŒ Hata, tekrar deneyin.",
      created_message:"Hesap oluÅŸturuldu â€” kod iÃ§in e-postanÄ±zÄ± kontrol edin.", network_error:"Sunucuya ulaÅŸÄ±lamÄ±yor. BaÄŸlantÄ±nÄ±zÄ± kontrol edin."
    },
    DE:{
      title:"Willkommen bei FICDES-BANK S.A",
      subtitle:"CPF-KontoerÃ¶ffnungsformular",
      select_placeholder:"-- AuswÃ¤hlen --",
      opt_mr:"Herr", opt_mrs:"Frau", opt_inst:"Institution",
      label_nom:"Nachname *", placeholder_nom:"z.B. MÃ¼ller",
      label_prenom:"Vorname *", placeholder_prenom:"z.B. Hans",
      label_rs:"Firmenname",
      label_email:"E-Mail-Adresse *", placeholder_email:"z.B. ich@beispiel.de",
      label_pass:"Passwort *", placeholder_pass:"min. 8 Zeichen",
      help_pass:"Mindestens 8 Zeichen. Buchstaben und Zahlen mischen.",
      label_confpass:"Passwort bestÃ¤tigen *",
      label_pays:"Land *", label_tel:"Telefonnummer *", placeholder_tel:"z.B. 90123456",
      label_mode:"Kommunikationsmodus *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"E-Mail",
      label_confidentialite:'Ich akzeptiere die <a href="#" rel="noopener" target="_blank">Datenschutzrichtlinie</a>',
      btn:"Konto erstellen", sending:"Senden...", fix_fields:"Bitte korrigieren Sie die markierten Felder.",
      err_genre:"Bitte Anrede wÃ¤hlen.", err_nom:"Nachname erforderlich (2+ Zeichen).", err_prenom:"Vorname erforderlich (2+ Zeichen).",
      err_email:"UngÃ¼ltige E-Mail-Adresse.", err_password:"PasswÃ¶rter stimmen nicht Ã¼berein.", err_pays:"Bitte Land auswÃ¤hlen.",
      err_tel:"UngÃ¼ltiger Nummer (6â€“15 Ziffern).", success:"âœ… Konto erfolgreich erstellt!", error:"âŒ Fehler, bitte erneut versuchen.",
      created_message:"Konto erstellt â€” prÃ¼fen Sie Ihre E-Mails auf den Code.", network_error:"Server nicht erreichbar. PrÃ¼fen Sie Ihre Verbindung."
    },
    AR:{
      title:"Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ FICDES-BANK S.A",
      subtitle:"Ù†Ù…ÙˆØ°Ø¬ ÙØªØ­ Ø­Ø³Ø§Ø¨ CPF",
      select_placeholder:"-- Ø§Ø®ØªØ± --",
      opt_mr:"Ø§Ù„Ø³ÙŠØ¯", opt_mrs:"Ø§Ù„Ø³ÙŠØ¯Ø©", opt_inst:"Ù…Ø¤Ø³Ø³Ø©",
      label_nom:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ± *", placeholder_nom:"Ù…Ø«Ø§Ù„: Ø¨Ù† ÙŠØ­ÙŠÙ‰",
      label_prenom:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ *", placeholder_prenom:"Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯",
      label_rs:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ",
      label_email:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *", placeholder_email:"Ù…Ø«Ø§Ù„: me@domain.com",
      label_pass:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *", placeholder_pass:"8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",
      help_pass:"8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„. Ø§Ù…Ø²Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù….",
      label_confpass:"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *",
      label_pays:"Ø§Ù„Ø¯ÙˆÙ„Ø© *", label_tel:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *", placeholder_tel:"Ù…Ø«Ø§Ù„: 90123456",
      label_mode:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§ØªØµØ§Ù„ *", opt_whatsapp:"ÙˆØ§ØªØ³Ø§Ø¨", opt_sms:"Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ©", opt_email:"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
      label_confidentialite:'Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" rel="noopener" target="_blank">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>',
      btn:"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ÙŠ", sending:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...", fix_fields:"Ù‚Ù… Ø¨ØªØµØ­ÙŠØ­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©.",
      err_genre:"Ø§Ø®ØªØ± Ù„Ù‚Ø¨Ùƒ.", err_nom:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ± Ù…Ø·Ù„ÙˆØ¨ (2+ Ø£Ø­Ø±Ù).", err_prenom:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨ (2+ Ø£Ø­Ø±Ù).",
      err_email:"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­.", err_password:"ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†.", err_pays:"Ø§Ø®ØªØ± Ø¯ÙˆÙ„Ø©.",
      err_tel:"Ø±Ù‚Ù… ØºÙŠØ± ØµØ§Ù„Ø­ (6-15 Ø±Ù‚Ù…Ù‹Ø§).", success:"âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!", error:"âŒ Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
      created_message:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ â€” ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù…Ø².", network_error:"ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„."
    },
    ZH:{
      title:"æ¬¢è¿æ¥åˆ° FICDES-BANK S.A",
      subtitle:"CPF å¼€æˆ·è¡¨æ ¼",
      select_placeholder:"-- è¯·é€‰æ‹© --",
      opt_mr:"å…ˆç”Ÿ", opt_mrs:"å¥³å£«", opt_inst:"æœºæ„",
      label_nom:"å§“ *", placeholder_nom:"ä¾‹å¦‚ï¼šå¼ ",
      label_prenom:"å *", placeholder_prenom:"ä¾‹å¦‚ï¼šå¼º",
      label_rs:"å…¬å¸åç§°",
      label_email:"ç”µå­é‚®ä»¶ *", placeholder_email:"ä¾‹å¦‚ï¼šme@example.com",
      label_pass:"å¯†ç  *", placeholder_pass:"è‡³å°‘8ä½",
      help_pass:"è‡³å°‘ 8 ä¸ªå­—ç¬¦ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ã€‚",
      label_confpass:"ç¡®è®¤å¯†ç  *",
      label_pays:"å›½å®¶ *", label_tel:"ç”µè¯å·ç  *", placeholder_tel:"ä¾‹å¦‚ï¼š90123456",
      label_mode:"é€šä¿¡æ–¹å¼ *", opt_whatsapp:"WhatsApp", opt_sms:"çŸ­ä¿¡", opt_email:"ç”µå­é‚®ä»¶",
      label_confidentialite:'æˆ‘æ¥å—<a href="#" rel="noopener" target="_blank">éšç§æ”¿ç­–</a>',
      btn:"åˆ›å»ºæˆ‘çš„è´¦æˆ·", sending:"å‘é€ä¸­...", fix_fields:"è¯·ä¿®æ­£æ ‡è®°çš„å­—æ®µã€‚",
      err_genre:"è¯·é€‰æ‹©ç§°è°“ã€‚", err_nom:"å§“æ°å¿…å¡«ï¼ˆè‡³å°‘ 2 ä¸ªå­—ç¬¦ï¼‰ã€‚", err_prenom:"åå­—å¿…å¡«ï¼ˆè‡³å°‘ 2 ä¸ªå­—ç¬¦ï¼‰ã€‚",
      err_email:"ç”µå­é‚®ä»¶æ— æ•ˆã€‚", err_password:"å¯†ç ä¸åŒ¹é…ã€‚", err_pays:"è¯·é€‰æ‹©å›½å®¶ã€‚",
      err_tel:"å·ç æ— æ•ˆï¼ˆ6â€“15 ä½æ•°å­—ï¼‰ã€‚", success:"âœ… è´¦æˆ·åˆ›å»ºæˆåŠŸï¼", error:"âŒ é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚",
      created_message:"è´¦æˆ·å·²åˆ›å»º â€” è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±ä»¥è·å–éªŒè¯ç ã€‚", network_error:"æ— æ³•è”ç³»æœåŠ¡å™¨ã€‚è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥."
    },
    RU:{
      title:"Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² FICDES-BANK S.A",
      subtitle:"Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ ÑÑ‡ĞµÑ‚Ğ° CPF",
      select_placeholder:"-- Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ --",
      opt_mr:"Ğ“Ğ¾ÑĞ¿Ğ¾Ğ´Ğ¸Ğ½", opt_mrs:"Ğ“Ğ¾ÑĞ¿Ğ¾Ğ¶Ğ°", opt_inst:"ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ",
      label_nom:"Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ *", placeholder_nom:"Ğ½Ğ°Ğ¿Ñ€.: Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²",
      label_prenom:"Ğ˜Ğ¼Ñ *", placeholder_prenom:"Ğ½Ğ°Ğ¿Ñ€.: Ğ˜Ğ²Ğ°Ğ½",
      label_rs:"ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸",
      label_email:"Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¿Ğ¾Ñ‡Ñ‚Ğ° *", placeholder_email:"Ğ½Ğ°Ğ¿Ñ€.: me@example.com",
      label_pass:"ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ *", placeholder_pass:"Ğ¼Ğ¸Ğ½. 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²",
      help_pass:"ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ². Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ±ÑƒĞºĞ²Ñ‹ Ğ¸ Ñ†Ğ¸Ñ„Ñ€Ñ‹.",
      label_confpass:"ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ *",
      label_pays:"Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ° *", label_tel:"ĞĞ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° *", placeholder_tel:"Ğ½Ğ°Ğ¿Ñ€.: 90123456",
      label_mode:"Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± ÑĞ²ÑĞ·Ğ¸ *", opt_whatsapp:"WhatsApp", opt_sms:"SMS", opt_email:"Email",
      label_confidentialite:'Ğ¯ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ <a href="#" rel="noopener" target="_blank">Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºÑƒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸</a>',
      btn:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ¹ ÑÑ‡Ñ‘Ñ‚", sending:"ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°...", fix_fields:"ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¸ÑĞ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ.",
      err_genre:"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ.", err_nom:"Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ° (2+ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°).", err_prenom:"Ğ˜Ğ¼Ñ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ (2+ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°).",
      err_email:"ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑ ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ñ‡Ñ‚Ñ‹.", err_password:"ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚.", err_pays:"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ.",
      err_tel:"ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ (6â€“15 Ñ†Ğ¸Ñ„Ñ€).", success:"âœ… ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½!", error:"âŒ ĞÑˆĞ¸Ğ±ĞºĞ°, Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°.",
      created_message:"ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½ â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°.", network_error:"ĞĞµ ÑƒĞ´Ğ°Ñ‘Ñ‚ÑÑ ÑĞ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ."
    }
  };

  // --- PAYS (liste complÃ¨te) ---
  const COUNTRIES = [
    {"name":"Afghanistan","dial_code":"+93"},{"name":"Albanie","dial_code":"+355"},{"name":"AlgÃ©rie","dial_code":"+213"},
    {"name":"Andorre","dial_code":"+376"},{"name":"Angola","dial_code":"+244"},{"name":"Antigua-et-Barbuda","dial_code":"+1"},
    {"name":"Argentine","dial_code":"+54"},{"name":"ArmÃ©nie","dial_code":"+374"},{"name":"Australie","dial_code":"+61"},
    {"name":"Autriche","dial_code":"+43"},{"name":"AzerbaÃ¯djan","dial_code":"+994"},{"name":"Bahamas","dial_code":"+1"},
    {"name":"BahreÃ¯n","dial_code":"+973"},{"name":"Bangladesh","dial_code":"+880"},{"name":"Barbade","dial_code":"+1"},
    {"name":"Belgique","dial_code":"+32"},{"name":"Belize","dial_code":"+501"},{"name":"BÃ©nin","dial_code":"+229"},
    {"name":"Bhoutan","dial_code":"+975"},{"name":"Bolivie","dial_code":"+591"},{"name":"Bosnie-HerzÃ©govine","dial_code":"+387"},
    {"name":"Botswana","dial_code":"+267"},{"name":"BrÃ©sil","dial_code":"+55"},{"name":"Brunei","dial_code":"+673"},
    {"name":"Bulgarie","dial_code":"+359"},{"name":"Burkina Faso","dial_code":"+226"},{"name":"Burundi","dial_code":"+257"},
    {"name":"Cabo Verde","dial_code":"+238"},{"name":"Cambodge","dial_code":"+855"},{"name":"Cameroun","dial_code":"+237"},
    {"name":"Canada","dial_code":"+1"},{"name":"RÃ©publique centrafricaine","dial_code":"+236"},{"name":"Tchad","dial_code":"+235"},
    {"name":"Chili","dial_code":"+56"},{"name":"Chine","dial_code":"+86"},{"name":"Colombie","dial_code":"+57"},
    {"name":"Comores","dial_code":"+269"},{"name":"Congo (Brazzaville)","dial_code":"+242"},{"name":"Congo (RDC)","dial_code":"+243"},
    {"name":"Costa Rica","dial_code":"+506"},{"name":"CÃ´te d'Ivoire","dial_code":"+225"},{"name":"Croatie","dial_code":"+385"},
    {"name":"Cuba","dial_code":"+53"},{"name":"Chypre","dial_code":"+357"},{"name":"RÃ©publique tchÃ¨que","dial_code":"+420"},
    {"name":"Danemark","dial_code":"+45"},{"name":"Djibouti","dial_code":"+253"},{"name":"Dominique","dial_code":"+1"},
    {"name":"RÃ©publique dominicaine","dial_code":"+1"},{"name":"Ã‰gypte","dial_code":"+20"},{"name":"El Salvador","dial_code":"+503"},
    {"name":"Ã‰quateur","dial_code":"+593"},{"name":"Ã‰gypte","dial_code":"+20"},{"name":"Ã‰rythrÃ©e","dial_code":"+291"},
    {"name":"Estonie","dial_code":"+372"},{"name":"Eswatini","dial_code":"+268"},{"name":"Ã‰thiopie","dial_code":"+251"},
    {"name":"Fidji","dial_code":"+679"},{"name":"Finlande","dial_code":"+358"},{"name":"France","dial_code":"+33"},
    {"name":"Gabon","dial_code":"+241"},{"name":"Gambie","dial_code":"+220"},{"name":"GÃ©orgie","dial_code":"+995"},
    {"name":"Allemagne","dial_code":"+49"},{"name":"Ghana","dial_code":"+233"},{"name":"GrÃ¨ce","dial_code":"+30"},
    {"name":"Grenade","dial_code":"+1"},{"name":"Guatemala","dial_code":"+502"},{"name":"GuinÃ©e","dial_code":"+224"},
    {"name":"GuinÃ©e-Bissau","dial_code":"+245"},{"name":"Guyana","dial_code":"+592"},{"name":"HaÃ¯ti","dial_code":"+509"},
    {"name":"Honduras","dial_code":"+504"},{"name":"Hongrie","dial_code":"+36"},{"name":"Islande","dial_code":"+354"},
    {"name":"Inde","dial_code":"+91"},{"name":"IndonÃ©sie","dial_code":"+62"},{"name":"Iran","dial_code":"+98"},
    {"name":"Irak","dial_code":"+964"},{"name":"Irlande","dial_code":"+353"},{"name":"IsraÃ«l","dial_code":"+972"},
    {"name":"Italie","dial_code":"+39"},{"name":"JamaÃ¯que","dial_code":"+1"},{"name":"Japon","dial_code":"+81"},
    {"name":"Jordanie","dial_code":"+962"},{"name":"Kazakhstan","dial_code":"+7"},{"name":"Kenya","dial_code":"+254"},
    {"name":"Kiribati","dial_code":"+686"},{"name":"KoweÃ¯t","dial_code":"+965"},{"name":"Kirghizistan","dial_code":"+996"},
    {"name":"Laos","dial_code":"+856"},{"name":"Lettonie","dial_code":"+371"},{"name":"Liban","dial_code":"+961"},
    {"name":"Lesotho","dial_code":"+266"},{"name":"Liberia","dial_code":"+231"},{"name":"Libye","dial_code":"+218"},
    {"name":"Liechtenstein","dial_code":"+423"},{"name":"Lituanie","dial_code":"+370"},{"name":"Luxembourg","dial_code":"+352"},
    {"name":"Madagascar","dial_code":"+261"},{"name":"Malawi","dial_code":"+265"},{"name":"Malaisie","dial_code":"+60"},
    {"name":"Maldives","dial_code":"+960"},{"name":"Mali","dial_code":"+223"},{"name":"Malte","dial_code":"+356"},
    {"name":"Ãles Marshall","dial_code":"+692"},{"name":"Mauritanie","dial_code":"+222"},{"name":"Maurice","dial_code":"+230"},
    {"name":"Mexique","dial_code":"+52"},{"name":"MicronÃ©sie","dial_code":"+691"},{"name":"Moldavie","dial_code":"+373"},
    {"name":"Monaco","dial_code":"+377"},{"name":"Mongolie","dial_code":"+976"},{"name":"MontÃ©nÃ©gro","dial_code":"+382"},
    {"name":"Maroc","dial_code":"+212"},{"name":"Mozambique","dial_code":"+258"},{"name":"Myanmar (Birmanie)","dial_code":"+95"},
    {"name":"Namibie","dial_code":"+264"},{"name":"Nauru","dial_code":"+674"},{"name":"NÃ©pal","dial_code":"+977"},
    {"name":"Pays-Bas","dial_code":"+31"},{"name":"Nouvelle-ZÃ©lande","dial_code":"+64"},{"name":"Nicaragua","dial_code":"+505"},
    {"name":"Niger","dial_code":"+227"},{"name":"NigÃ©ria","dial_code":"+234"},{"name":"CorÃ©e du Nord","dial_code":"+850"},
    {"name":"NorvÃ¨ge","dial_code":"+47"},{"name":"Oman","dial_code":"+968"},{"name":"Pakistan","dial_code":"+92"},
    {"name":"Palaos","dial_code":"+680"},{"name":"Panama","dial_code":"+507"},{"name":"Papouasie-Nouvelle-GuinÃ©e","dial_code":"+675"},
    {"name":"Paraguay","dial_code":"+595"},{"name":"PÃ©rou","dial_code":"+51"},{"name":"Philippines","dial_code":"+63"},
    {"name":"Pologne","dial_code":"+48"},{"name":"Portugal","dial_code":"+351"},{"name":"Qatar","dial_code":"+974"},
    {"name":"Roumanie","dial_code":"+40"},{"name":"Russie","dial_code":"+7"},{"name":"Rwanda","dial_code":"+250"},
    {"name":"Saint-Kitts-et-Nevis","dial_code":"+1"},{"name":"Sainte-Lucie","dial_code":"+1"},{"name":"Saint-Vincent-et-les-Grenadines","dial_code":"+1"},
    {"name":"Samoa","dial_code":"+685"},{"name":"Saint-Marin","dial_code":"+378"},{"name":"Sao TomÃ©-et-Principe","dial_code":"+239"},
    {"name":"Arabie saoudite","dial_code":"+966"},{"name":"SÃ©nÃ©gal","dial_code":"+221"},{"name":"Serbie","dial_code":"+381"},
    {"name":"Seychelles","dial_code":"+248"},{"name":"Sierra Leone","dial_code":"+232"},{"name":"Singapour","dial_code":"+65"},
    {"name":"Slovaquie","dial_code":"+421"},{"name":"SlovÃ©nie","dial_code":"+386"},{"name":"Ãles Salomon","dial_code":"+677"},
    {"name":"Somalie","dial_code":"+252"},{"name":"Afrique du Sud","dial_code":"+27"},{"name":"CorÃ©e du Sud","dial_code":"+82"},
    {"name":"Espagne","dial_code":"+34"},{"name":"Sri Lanka","dial_code":"+94"},{"name":"Soudan","dial_code":"+249"},
    {"name":"Soudan du Sud","dial_code":"+211"},{"name":"Suriname","dial_code":"+597"},{"name":"SuÃ¨de","dial_code":"+46"},
    {"name":"Suisse","dial_code":"+41"},{"name":"Syrie","dial_code":"+963"},{"name":"TaÃ¯wan","dial_code":"+886"},
    {"name":"Tadjikistan","dial_code":"+992"},{"name":"Tanzanie","dial_code":"+255"},{"name":"ThaÃ¯lande","dial_code":"+66"},
    {"name":"Timor-Leste","dial_code":"+670"},{"name":"Togo","dial_code":"+228"},{"name":"Tonga","dial_code":"+676"},
    {"name":"TrinitÃ©-et-Tobago","dial_code":"+1"},{"name":"Tunisie","dial_code":"+216"},{"name":"Turquie","dial_code":"+90"},
    {"name":"TurkmÃ©nistan","dial_code":"+993"},{"name":"Tuvalu","dial_code":"+688"},{"name":"Ouganda","dial_code":"+256"},
    {"name":"Ukraine","dial_code":"+380"},{"name":"Ã‰mirats arabes unis","dial_code":"+971"},{"name":"Royaume-Uni","dial_code":"+44"},
    {"name":"Ã‰tats-Unis","dial_code":"+1"},{"name":"Uruguay","dial_code":"+598"},{"name":"OuzbÃ©kistan","dial_code":"+998"},
    {"name":"Vanuatu","dial_code":"+678"},{"name":"Vatican (Saint-SiÃ¨ge)","dial_code":"+39"},{"name":"Venezuela","dial_code":"+58"},
    {"name":"ViÃªt Nam","dial_code":"+84"},{"name":"YÃ©men","dial_code":"+967"},{"name":"Zambie","dial_code":"+260"},
    {"name":"Zimbabwe","dial_code":"+263"}
  ];

  // --- DOM refs ---
  const form = document.getElementById('inscriptionForm');
  const submitBtn = document.getElementById('submitBtn');
  const successMessage = document.getElementById('successMessage');
  const createdMessage = document.getElementById('createdMessage');
  const errorMessage = document.getElementById('errorMessage');
  const networkMessage = document.getElementById('networkMessage');

  const inline = {
    genre: document.getElementById('err_genre'),
    nom: document.getElementById('err_nom'),
    prenom: document.getElementById('err_prenom'),
    rs: document.getElementById('err_rs'),
    email: document.getElementById('err_email'),
    password: document.getElementById('err_password'),
    pays: document.getElementById('err_pays'),
    tel: document.getElementById('err_tel'),
    mode: document.getElementById('err_mode'),
    conf: document.getElementById('err_conf'),
  };

  const inputs = {
    genre: document.getElementById('genre'),
    nom: document.getElementById('nom'),
    prenom: document.getElementById('prenom'),
    raison_sociale: document.getElementById('raison_sociale'),
    email: document.getElementById('email'),
    mot_de_passe: document.getElementById('mot_de_passe'),
    confirmer_mot_de_passe: document.getElementById('confirmer_mot_de_passe'),
    pays: document.getElementById('pays'),
    indicatif: document.getElementById('indicatif'),
    telephone: document.getElementById('telephone'),
    mode: document.getElementById('mode'),
    confidentialite: document.getElementById('confidentialite')
  };

  // --- Helpers ---
  function showInline(id, show){ if(inline[id]) inline[id].style.display = show ? 'block' : 'none'; }
  function hideAllInline(){ Object.keys(inline).forEach(k=> showInline(k,false)); }
  function hideAllMessages(){
    [successMessage, createdMessage, errorMessage, networkMessage].forEach(el=>{
      el.style.display='none'; el.setAttribute('aria-hidden','true');
    });
  }
  function showMessage(el, text){
    hideAllMessages();
    el.textContent = text;
    el.style.display='block';
    el.setAttribute('aria-hidden','false');
  }
  function sanitize(v){ return String(v||'').trim(); }

  // --- Populate pays select (tri alphabÃ©tique) ---
  (function populateCountries(){
    const sorted = COUNTRIES.slice().sort((a,b)=>{
    const an = a.name.toLowerCase(), bn = b.name.toLowerCase();
     return an < bn ? -1 : (an > bn ? 1 : 0);
    });    const sel = inputs.pays;
    sel.innerHTML = '';
    const placeholder = document.createElement('option'); placeholder.value=''; placeholder.textContent = T[currentLang].select_placeholder || '-- Select --';
    sel.appendChild(placeholder);
    sorted.forEach(c=>{
      const opt = document.createElement('option');
      opt.value = c.name;
      opt.dataset.dial = c.dial_code;
      opt.textContent = c.name + ' ' + (c.dial_code ? `(${c.dial_code})` : '');
      sel.appendChild(opt);
    });

    const prefer = sorted.find(s => s.name.toLowerCase().includes(' SÃ©lectionnez '));
    if(prefer) sel.value = prefer.name;
    updateIndicatif();
  })();

  // --- Update indicatif when pays change ---
  function updateIndicatif(){
    const sel = inputs.pays;
    const selected = sel.options[sel.selectedIndex];
    const dial = selected ? selected.dataset.dial || '' : '';
    inputs.indicatif.value = dial || '';
  }
  inputs.pays.addEventListener('change', ()=> updateIndicatif());

  // --- Language application (update text nodes, placeholders, aria) ---
  function applyLanguage(lang){
    currentLang = lang;
    localStorage.setItem('lang', lang);
    document.getElementById('title').textContent = T[lang].title || T['FR'].title;
    document.getElementById('subtitle').textContent = T[lang].subtitle || '';
    document.getElementById('label_genre').textContent = 'CivilitÃ© *';
    document.getElementById('label_rs').textContent = T[lang].label_rs || '';
    document.getElementById('label_nom').textContent = T[lang].label_nom || '';
    document.getElementById('label_prenom').textContent = T[lang].label_prenom || '';
    document.getElementById('label_email').textContent = T[lang].label_email || '';
    document.getElementById('label_pass').textContent = T[lang].label_pass || '';
    document.getElementById('help_pass').textContent = T[lang].help_pass || '';
    document.getElementById('label_confpass').textContent = T[lang].label_confpass || '';
    document.getElementById('label_pays').textContent = T[lang].label_pays || '';
    document.getElementById('label_tel').textContent = T[lang].label_tel || '';
    document.getElementById('label_mode').textContent = T[lang].label_mode || '';
    document.getElementById('confidentialite_label').innerHTML = T[lang].label_confidentialite || '';
    submitBtn.textContent = T[lang].btn || 'CrÃ©er mon compte';
    inputs.email.placeholder = T[lang].placeholder_email || '';
    inputs.mot_de_passe.placeholder = T[lang].placeholder_pass || '';
    inputs.telephone.placeholder = T[lang].placeholder_tel || '';
    const firstOption = inputs.pays.querySelector('option');
    if(firstOption) firstOption.textContent = T[lang].select_placeholder || firstOption.textContent;

    // traduction des options genre
    const opts = inputs.genre.options;
    if(opts.length >= 4){
      opts[1].textContent = T[lang].opt_mr || opts[1].textContent;
      opts[2].textContent = T[lang].opt_mrs || opts[2].textContent;
      opts[3].textContent = T[lang].opt_inst || opts[3].textContent;
    }
  }

  // init language
  langSelect.value = currentLang;
  applyLanguage(currentLang);
  langSelect.addEventListener('change', (e)=> applyLanguage(e.target.value));

  // --- CSRF token generation (placeholder) ---
  (function insertCSRF(){
    const token = 'csrf_' + Math.random().toString(36).slice(2,12);
    const container = document.getElementById('csrfContainer');
    container.innerHTML = `<input type="hidden" name="csrf_token" value="${token}" />`;
  })();

  // --- Validation helpers ---
  function isEmail(v){
    v = sanitize(v);
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
  }
  function isPhoneDigits(v){
    v = sanitize(v).replace(/\D/g,'');
    return /^\d{6,15}$/.test(v);
  }

  function validateAll(){
    hideAllInline();
    let ok = true;
    if(!sanitize(inputs.genre.value)){
      showInline('genre', true); ok=false;
    }
    if(inputs.genre.value === "Institution" && !sanitize(inputs.raison_sociale.value)){
      showInline('rs', true); ok=false;
    }
    if(!sanitize(inputs.nom.value) || sanitize(inputs.nom.value).length < 2){
      showInline('nom', true); ok=false;
    }
    if(!sanitize(inputs.prenom.value) || sanitize(inputs.prenom.value).length < 2){
      showInline('prenom', true); ok=false;
    }
    if(!isEmail(inputs.email.value)){
      showInline('email', true); ok=false;
    }
    if(sanitize(inputs.mot_de_passe.value).length < 8 || sanitize(inputs.mot_de_passe.value) !== sanitize(inputs.confirmer_mot_de_passe.value)){
      showInline('password', true); ok=false;
    }
    if(!sanitize(inputs.pays.value)){
      showInline('pays', true); ok=false;
    }
    if(!isPhoneDigits(inputs.telephone.value)){
      showInline('tel', true); ok=false;
    }
    if(!sanitize(inputs.mode.value)){
      showInline('mode', true); ok=false;
    }
    if(!inputs.confidentialite.checked){
      showInline('conf', true); ok=false;
    }
    return ok;
  }

  // toggle submit state
  function setSubmitting(on){
    submitBtn.disabled = on;
    submitBtn.textContent = on ? (T[currentLang].sending || 'Envoi en cours...') : (T[currentLang].btn || 'CrÃ©er mon compte');
  }

  // --- Submit handler (light, real fetch) ---
  form.addEventListener('submit', async function(e){
    e.preventDefault();
    hideAllMessages();
    if(!validateAll()){
      showMessage(errorMessage, T[currentLang].fix_fields || 'Corrigez les champs indiquÃ©s.');
      return;
    }
    setSubmitting(true);

    const payload = {
      genre: sanitize(inputs.genre.value),
      raison_sociale: sanitize(inputs.raison_sociale.value),
      nom: sanitize(inputs.nom.value),
      prenom: sanitize(inputs.prenom.value),
      email: sanitize(inputs.email.value),
      mot_de_passe: sanitize(inputs.mot_de_passe.value),
      pays: sanitize(inputs.pays.value),
      indicatif: sanitize(inputs.indicatif.value),
      telephone: sanitize(inputs.telephone.value).replace(/\D/g,''),
      mode: sanitize(inputs.mode.value),
      accept_confidentialite: inputs.confidentialite.checked,
      csrf_token: (document.querySelector('#csrfContainer input[name="csrf_token"]') || {}).value || ''
    };

    try {
      const resp = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      const result = await resp.json();
      if (resp.ok) {
        showMessage(createdMessage, T[currentLang].created_message || 'Compte crÃ©Ã© â€” vÃ©rifiez votre messagerie.');
        form.reset();
        updateIndicatif();
      } else {
        showMessage(errorMessage, result?.message || (T[currentLang].error || 'Erreur.'));
      }
    } catch (err) {
      console.error("Erreur rÃ©seau:", err);
      showMessage(networkMessage, T[currentLang].network_error || 'Impossible de contacter le serveur.');
    } finally {
      setSubmitting(false);
    }
  });

  // --- Real-time feedback: password match ---
  inputs.confirmer_mot_de_passe.addEventListener('input', ()=>{
    const p = sanitize(inputs.mot_de_passe.value);
    const c = sanitize(inputs.confirmer_mot_de_passe.value);
    showInline('password', !(p && c && p === c) && c.length>0);
  });
  inputs.mot_de_passe.addEventListener('input', ()=>{
    const p = sanitize(inputs.mot_de_passe.value);
    showInline('password', p.length>0 && p.length<8);
  });

  inputs.telephone.addEventListener('input', (e)=>{
    // user formatting allowed; validation on submit/blur
  });

  // accessibility small helper
  langSelect.addEventListener('change', ()=> {
    applyLanguage(langSelect.value);
  });

  // expose some functions optionally (can be removed if not needed)
  window.FICDES = {
    T, COUNTRIES, applyLanguage, validateAll, updateIndicatif
  };
document.getElementById('inscriptionForm').addEventListener('submit', async (e) => {
  e.preventDefault(); // empÃªche le rechargement de la page

  // DÃ©sactive le bouton pendant lâ€™envoi
  const btn = document.getElementById('submitBtn');
  btn.disabled = true;
  const originalText = btn.textContent;
  btn.textContent = "Envoi en cours...";

  // RÃ©cupÃ¨re les donnÃ©es du formulaire
  const data = Object.fromEntries(new FormData(e.target).entries());

  try {
    // ğŸ”— URL du backend (tu la changeras aprÃ¨s dÃ©ploiement sur Netlify)
    const API_URL = "/.netlify/functions/sendCode";

    // Envoi au serveur
    const res = await fetch(API_URL, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(data)
    });

    const json = await res.json();

    if (res.ok) {
      alert("âœ… Code envoyÃ© ! Vous allez Ãªtre redirigÃ© vers CPF2.");
      window.location.href = "index_CPF2.html";
    } else {
      alert("âŒ Erreur : " + (json.message || "Ã‰chec dâ€™envoi du code"));
    }

  } catch (err) {
    alert("âš ï¸ Erreur de connexion au serveur.");
    console.error(err);
  } finally {
    btn.disabled = false;
    btn.textContent = originalText;
  }
});
  
  </script>
</body>
</html>
